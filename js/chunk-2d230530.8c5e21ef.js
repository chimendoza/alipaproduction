(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230530"],{ec95:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("div",[a("card",{staticClass:"card",attrs:{title:"Procesar un archivo de pago"}},[a("p",[t._v("Para calcular la utilidad necesitas subir el(los) archivo(s) de control y el archivo de pago de Amazon")]),a("form",{on:{submit:function(a){return a.preventDefault(),t.procesarArchivos.apply(null,arguments)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"archivoControl"}},[t._v("Sube uno o múltples archivos de control en formato CSV")]),a("input",{staticClass:"form-control",attrs:{id:"archivoControl",required:"",type:"file",name:"control",multiple:"",accept:".csv"},on:{change:t.seleccionarArchivoControl}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"archivoPago"}},[t._v("Elige el archivo de pago")]),a("input",{staticClass:"form-control",attrs:{required:"",type:"file",id:"archivoPago",name:"pago",accept:"*.txt"},on:{change:t.seleccionarArchivoPago}})]),t.errors?a("b-alert",{attrs:{variant:t.message_type,show:""}},[t._v(t._s(t.message))]):t._e(),a("button",{staticClass:"btn btn-info",attrs:{round:""}},[t._v(t._s(t.estatus))]),t.show_results?a("div",{staticClass:"results"},[a("a",{staticClass:"pull-right",attrs:{href:t.download_link,target:"_blank"}},[a("i",{staticClass:"ti-download"}),t._v("Descargar "+t._s(t.filename))]),a("h3",[t._v("Resultados")]),a("b-table",{attrs:{id:"my-table",items:t.items,"per-page":t.perPage,"current-page":t.currentPage,small:""}}),a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:"currentPage"}}),a("p",{staticClass:"mt-3"},[t._v("Página: "+t._s(t.currentPage))]),a("h4",[t._v("Utilidad total: $"+t._s(t.utilidad_total))])],1):t._e()],1)])],1)},r=[],s=e("9870"),n={components:{},computed:{rows:function(){return this.items.length},message_type:function(){return this.msg_type},estatus:function(){return this.loading?"Procesando...":"Procesar archivo"},show_results:function(){return this.has_results}},data:function(){return{has_results:!1,filename:"",download_link:"",errors:!1,message:"",msg_type:"",loading:!1,utilidad_total:"",model:{control:[],pago:""},perPage:50,currentPage:1,items:[]}},methods:{seleccionarArchivoControl:function(t){this.model.control=t.target.files},seleccionarArchivoPago:function(t){this.model.pago=t.target.files[0]},procesarArchivos:function(){var t=this;this.has_results=!1;var a=new FormData;a.append("pago",this.model.pago);for(var e=0;e<this.model.control.length;e++)a.append("control[]",this.model.control[e]);this.loading=!0,this.errors=!1,s["a"].post("/uploader",a).then((function(a){1==a.data.done?(t.items=a.data.items,t.filename=a.data.filename,t.download_link=a.data.download_link,t.utilidad_total=a.data.utilidad_total,t.has_results=!0):(t.message=a.data.message,t.msg_type="danger",t.errors=!0)})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))}}},l=n,i=e("2877"),c=Object(i["a"])(l,o,r,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d230530.8c5e21ef.js.map