{"version":3,"sources":["webpack:///./src/pages/Dashboard.vue","webpack:///src/pages/Dashboard.vue","webpack:///./src/pages/Dashboard.vue?3e09","webpack:///./src/pages/Dashboard.vue?45a0"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_v","on","$event","preventDefault","procesarArchivos","apply","arguments","seleccionarArchivoControl","seleccionarArchivoPago","errors","message_type","_s","message","_e","estatus","show_results","download_link","filename","items","perPage","currentPage","rows","model","value","callback","$$v","expression","utilidad_total","staticRenderFns","components","computed","length","msg_type","loading","has_results","data","control","pago","methods","event","target","files","_this","FormData","append","i","api","post","then","response","done","catch","error","console","log","finally","component"],"mappings":"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","file":"js/chunk-2d230530.8c5e21ef.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('card',{staticClass:\"card\",attrs:{\"title\":\"Procesar un archivo de pago\"}},[_c('p',[_vm._v(\"Para calcular la utilidad necesitas subir el(los) archivo(s) de control y el archivo de pago de Amazon\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.procesarArchivos.apply(null, arguments)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"archivoControl\"}},[_vm._v(\"Sube uno o múltples archivos de control en formato CSV\")]),_c('input',{staticClass:\"form-control\",attrs:{\"id\":\"archivoControl\",\"required\":\"\",\"type\":\"file\",\"name\":\"control\",\"multiple\":\"\",\"accept\":\".csv\"},on:{\"change\":_vm.seleccionarArchivoControl}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"archivoPago\"}},[_vm._v(\"Elige el archivo de pago\")]),_c('input',{staticClass:\"form-control\",attrs:{\"required\":\"\",\"type\":\"file\",\"id\":\"archivoPago\",\"name\":\"pago\",\"accept\":\"*.txt\"},on:{\"change\":_vm.seleccionarArchivoPago}})]),(_vm.errors)?_c('b-alert',{attrs:{\"variant\":_vm.message_type,\"show\":\"\"}},[_vm._v(_vm._s(_vm.message))]):_vm._e(),_c('button',{staticClass:\"btn btn-info\",attrs:{\"round\":\"\"}},[_vm._v(_vm._s(_vm.estatus))]),(_vm.show_results)?_c('div',{staticClass:\"results\"},[_c('a',{staticClass:\"pull-right\",attrs:{\"href\":_vm.download_link,\"target\":\"_blank\"}},[_c('i',{staticClass:\"ti-download\"}),_vm._v(\"Descargar \"+_vm._s(_vm.filename))]),_c('h3',[_vm._v(\"Resultados\")]),_c('b-table',{attrs:{\"id\":\"my-table\",\"items\":_vm.items,\"per-page\":_vm.perPage,\"current-page\":_vm.currentPage,\"small\":\"\"}}),_c('b-pagination',{attrs:{\"total-rows\":_vm.rows,\"per-page\":_vm.perPage,\"aria-controls\":\"my-table\"},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}}),_c('p',{staticClass:\"mt-3\"},[_vm._v(\"Página: \"+_vm._s(_vm.currentPage))]),_c('h4',[_vm._v(\"Utilidad total: $\"+_vm._s(_vm.utilidad_total))])],1):_vm._e()],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n\n\n    \n    <card class=\"card\" title=\"Procesar un archivo de pago\">\n\n      <p>Para calcular la utilidad necesitas subir el(los) archivo(s) de control y el archivo de pago de Amazon</p>\n      <form @submit.prevent=\"procesarArchivos\">\n      <div class=\"form-group\">\n        <label for=\"archivoControl\">Sube uno o múltples archivos de control en formato CSV</label>\n        <input id=\"archivoControl\" class=\"form-control\" required type=\"file\" v-on:change=\"seleccionarArchivoControl\" name=\"control\" multiple accept=\".csv\"/>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"archivoPago\">Elige el archivo de pago</label>\n        <input class=\"form-control\" required type=\"file\" id=\"archivoPago\" v-on:change=\"seleccionarArchivoPago\" name=\"pago\" accept=\"*.txt\"/>\n      </div>\n\n      <b-alert v-if=\"errors\" :variant=\"message_type\" show>{{ message }}</b-alert>\n\n      <button class=\"btn btn-info\" round>{{estatus}}</button>\n\n\n      <div class=\"results\" v-if=\"show_results\">\n        <a v-bind:href=\"download_link\" target=\"_blank\" class=\"pull-right\"><i class=\"ti-download\"></i>Descargar {{ filename }}</a>\n      <h3>Resultados</h3>\n\n    <b-table\n      id=\"my-table\"\n      :items=\"items\"\n      :per-page=\"perPage\"\n      :current-page=\"currentPage\"\n      small\n    ></b-table>\n      \n    <b-pagination\n      v-model=\"currentPage\"\n      :total-rows=\"rows\"\n      :per-page=\"perPage\"\n      aria-controls=\"my-table\"\n    ></b-pagination>\n\n    <p class=\"mt-3\">Página: {{ currentPage }}</p>   \n    \n    <h4>Utilidad total: ${{ utilidad_total }}</h4>\n\n\n  </div>    \n\n\n      \n      \n\n      </form>\n     </card>\n\n\n  </div>\n</template>\n<script>\n\n\n\n\nimport api from '@/util/api.js';\n\n\nexport default {\n  components: {\n  },\n\n  computed:{\n\n    \n      rows() {\n        return this.items.length\n    },\n\n    message_type(){\n\n      return this.msg_type\n\n    },\n\n    estatus(){\n\n      \n        return this.loading?'Procesando...':'Procesar archivo';\n\n\n    },\n\n    show_results(){\n\n      return this.has_results;\n\n    }\n\n  },\n\n  data() {\n    return {\n      \n      has_results:false,\n      filename:'',\n      download_link:'',\n      errors:false,\n      message:'',\n      msg_type:'',\n      loading:false,\n      utilidad_total:'',\n      model:{\n\n        control:[],\n        pago:'',\n      },\n\n      perPage: 50,\n      currentPage: 1,\n      items: []\n\n\n\n    }\n  },\n\n  methods:{\n\n\n    seleccionarArchivoControl(event){\n\n      this.model.control = event.target.files;\n    },\n\n    seleccionarArchivoPago(event){\n\n      this.model.pago = event.target.files[0];\n    },\n\n    procesarArchivos(){\n\n      this.has_results=false;\n      \n      const data=new FormData();\n      data.append('pago',this.model.pago);\n\n\n\n      for (var i = 0; i < this.model.control.length; i++) {\n          data.append('control[]', this.model.control[i]);\n      }\n\n\n      this.loading=true;\n\n      this.errors=false;\n\n      api.post('/uploader',data).then(response=>{\n\n        \n        \n        \n        if(response.data.done==1){\n          this.items=response.data.items;\n          this.filename=response.data.filename;\n          this.download_link=response.data.download_link;\n          this.utilidad_total=response.data.utilidad_total;\n          this.has_results=true;\n\n        }else{\n          this.message=response.data.message;\n          this.msg_type='danger';\n          this.errors=true;\n        }\n          \n      }).catch(error=>{\n\n        console.log(error);\n      }).finally(()=>{\n        \n        this.loading=false;\n\n      });\n\n    },\n\n\n  }\n\n\n};\n</script>\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=0ece4dd8&\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}